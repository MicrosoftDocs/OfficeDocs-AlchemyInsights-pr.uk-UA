---
title: Запит на створення API Microsoft Graph
ms.author: v-jmathew
author: v-jmathew
manager: scotv
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Normal
ms.collection: Adm_O365
ms.custom:
- "9004345"
- "7846"
ms.openlocfilehash: 527e88c7b3cb1cc4f5535e3b0d2bc4d8d1163336
ms.sourcegitcommit: 029c4697b77ce996d41ca74c4fa86de1bb84bd99
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 01/25/2021
ms.locfileid: "49974690"
---
# <a name="querying-the-microsoft-graph-api"></a>Запит на створення API Microsoft Graph

Цей розділ може також застосовуватися до розробників, які ще використовують API Azure AD Graph. Однак **наполегливо** радимо використовувати Microsoft Graph для всіх сценаріїв служби каталогів, посвідчень та керування доступом.

**Проблеми з автентифікацією або авторизацією**

- Якщо ваша програма **не може придбати маркери** для виклику Microsoft Graph, виберіть **проблему з використанням маркера доступу (автентифікації)** Microsoft Graph, щоб отримати додаткову довідку й підтримку в цій статті.
- Якщо ваша програма **отримує 401 або 403 помилки авторизації** під час виклику Microsoft Graph, виберіть категорію **отримати доступ до помилки (авторизації)** Microsoft Graph API, щоб отримати додаткову довідку й підтримку в цій статті.

**Я хочу використовувати Microsoft Graph, але не знаєте, з чого почати**

Докладні відомості про Microsoft Graph наведено в статті:

- [Огляд Microsoft Graph](https://docs.microsoft.com/graph/overview)
- [Огляд ідентифікації та керування доступом у Microsoft Graph](https://docs.microsoft.com/graph/azuread-identity-access-management-concept-overview)
- [Початок роботи зі створення програм Microsoft Graph](https://docs.microsoft.com/graph/)
- **Провідник Microsoft Graph** – перевірка API Microsoft Graph у клієнті або демонстраційному клієнті

**Я хочу використовувати Microsoft Graph, але вона підтримує API 1,0 для каталогу, яку мені потрібно?**

Microsoft Graph – це рекомендований API для каталогів, посвідчень та керування доступом. Однак, між можливими в лазуровому графіку і Microsoft Graph ще кілька прогалин. Перегляньте наведені нижче статті, які висвітлюють актуальні відмінності для надання допомоги у виборі:

- [Відмінності між типами ресурсів у Azure AD Graph і Microsoft Graph](https://docs.microsoft.com/graph/migrate-azure-ad-graph-resource-differences)
- [Відмінності між майновими ОГОЛОШЕННЯМИ та Microsoft Graph](https://docs.microsoft.com/graph/migrate-azure-ad-graph-property-differences)
- [Відмінності між методами Azure AD і Microsoft Graph](https://docs.microsoft.com/graph/migrate-azure-ad-graph-method-differences)

**Під час запиту на об'єкт *користувача* багато його властивостей відсутні**

`GET https://graph.microsoft.com/v1.0/users` Повертає лише 11 властивостей, оскільки Microsoft Graph автоматично вибирає набір властивостей *користувача* за замовчуванням для повернення. Якщо вам потрібні інші властивості *користувача* , використовуйте $Select, щоб обрати властивості потреб програми. Спочатку випробуйте **провідник Microsoft Graph** .

**Деякі значення властивостей користувача мають *Null* -значення, навіть якщо я знаю, що вони налаштовані**

Ймовірніше пояснення полягає в тому, що програма надала *користувачу. ReadBasic. All* дозвіл. Це дасть змогу програмі читати обмежену кількість властивостей користувача, повернувши всі інші властивості як Null, навіть якщо вони вже були встановлені. Скористайтеся наданням користувачу застосунку *. читати. Усі* дозволи натомість.

Щоб отримати докладніші відомості, ознайомтеся з [дозволами користувачів Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference#user-permissions).

**У мене виникли проблеми з використанням параметрів запиту OData для фільтрування даних у моїх запитах**

Хоча Microsoft Graph підтримує широкий діапазон параметрів запиту OData, багато з цих параметрів не підтримуються в службах каталогів (ресурси, які успадковуються від *Directoryobject*) у Microsoft Graph. Ті самі обмеження, які були присутні в лазуровий РЕКЛАМНИЙ графік, зберігаються здебільшого в Microsoft Graph:

1. **Не підтримується**: $count, $search та $Filter на *Null* або *не Null* -значення
2. **Не підтримується**: $Filter за певними властивостями (див. теми ресурсів, у яких властивості можна фільтрувати)
3. **Не підтримується**: пейджинговий, фільтрація та сортування в той самий час
4. **Не підтримується**: фільтрування за зв'язком. Наприклад – знайдіть всіх учасників інженерної групи, що входять до складу Великої Британії.
5. **Часткова підтримка**: $OrderBy *користувача* (лише Dispиім'я та userPrincipalName) і *Група*
6. **Часткова підтримка**: $Filter (підтримує тільки " *еквалайзер*", " *startswith*", " *and*", "and" *або* *"обмежена"*), $expand (розширення зв'язків одного об'єкта повертає всі зв'язки, але розширення колекції зв'язків об'єктів обмежена)

Докладні відомості наведено в статті [Настроювання відповідей за допомогою параметрів запиту](https://docs.microsoft.com/graph/query-parameters).

**Виклик API не працює – де можна виконувати додаткові перевірки?**

**Microsoft Graph Explorer** – перевірка API Microsoft Graph у клієнті чи демонстраційному клієнті, а також перегляньте **Приклади запитів** у провіднику Microsoft Graph.

**Під час запиту на дані, схоже, я отримую Неповні дані, які повертаються**

Якщо у вас є запит на збирання (наприклад, *користувачі*), Microsoft Graph використовує серверні обмеження на сторінці, щоб результати завжди були повернуті за замовчуванням розмір сторінки. Ваша програма має завжди очікувати на сторінку через колекції, повернуті від служби.

Докладні відомості:

- [Практичні поради з роботи з Microsoft Graph](https://docs.microsoft.com/graph/best-practices-concept)
- [Дані про пейджинговий Microsoft Graph у програмі](https://docs.microsoft.com/graph/paging)

**Моя програма дуже низька, а також її обмежується. Які удосконалення можна зробити?**

Залежно від сценарію, у вашому розпорядженні є різні варіанти, щоб зробити програму більш продуктивнішою, а в деяких випадках менше схильні до задуми служби (коли ви робите дуже багато розмов).

Докладніше про це див. в статтях:

- [Практичні поради з роботи з Microsoft Graph](https://docs.microsoft.com/graph/best-practices-concept)
- [Запити на дозування](https://docs.microsoft.com/graph/json-batching)
- [Відстеження змін через Дельта-запит](https://docs.microsoft.com/graph/delta-query-overview)
- [Отримання сповіщень про зміни через вебгачки](https://docs.microsoft.com/graph/webhooks)
- [Вказівки щодо дроселювання](https://docs.microsoft.com/graph/throttling)

**Де можна знайти додаткові відомості про помилки та відомі проблеми?**

- [Відомості про помилки під час відгуку Microsoft Graph](https://docs.microsoft.com/graph/errors)
- [Відомі проблеми з Microsoft Graph](https://docs.microsoft.com/graph/known-issues)

**Де можна перевірити стан доступності та підключення служби?**

Доступність служб і зв'язок із базовими службами, які можна отримати за допомогою Microsoft Graph, може вплинути на загальну доступність та продуктивність Microsoft Graph.

- У розділі справність служби "Azure Active Directory" Перевірте стан служби **безпеки + посвідчення** , що відображається на [сторінці "стан Лазур](https://azure.microsoft.com/status/)".
- Для служб Office, які беруть участь у програмі Microsoft Graph, перевірте стан служб, перелічених на [приладній дошці служби Office](https://portal.office.com/adminportal/home#/servicehealth).
