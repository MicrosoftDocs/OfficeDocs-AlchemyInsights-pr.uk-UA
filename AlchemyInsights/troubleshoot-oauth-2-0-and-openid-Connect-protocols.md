---
title: Усунення несправностей із протоколами OAuth 2,0 і OpenID
ms.author: v-smandalika
author: v-smandalika
manager: dansimp
ms.date: 03/17/2021
audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Priority
ms.collection: Adm_O365
ms.custom:
- "9776"
- "9004342"
ms.openlocfilehash: d2f14d4d16bea890b564cdb9bd9ac3875c28d115
ms.sourcegitcommit: c08bed4071baa3bb5879496df3ed44fb828c8367
ms.translationtype: MT
ms.contentlocale: uk-UA
ms.lasthandoff: 03/19/2021
ms.locfileid: "51037694"
---
# <a name="troubleshoot-oauth-20-and-openid-connect-protocols"></a><span data-ttu-id="ab190-102">Усунення несправностей із протоколами OAuth 2,0 і OpenID</span><span class="sxs-lookup"><span data-stu-id="ab190-102">Troubleshoot OAuth 2.0 and OpenID Connect protocols</span></span>

<span data-ttu-id="ab190-103">Щоб вирішити проблеми з OAuth 2,0 і "Вконтакте", виконайте наведені нижче Рекомендовані дії.</span><span class="sxs-lookup"><span data-stu-id="ab190-103">To resolve OAuth 2.0 and OpenID Connect issues, perform the following recommended steps:</span></span>

<span data-ttu-id="ab190-104">Зверніться до наведених нижче статей, пов'язаних із конфігурацією та виправлення неполадок із протоколами OAuth 2,0 і OpenID Connect:</span><span class="sxs-lookup"><span data-stu-id="ab190-104">Refer to the following articles that are related to configuration and troubleshooting OAuth 2.0 and OpenID Connect protocols:</span></span>

- <span data-ttu-id="ab190-105">[Служба ідентифікації Microsoft і OAuth 2,0 код авторизації](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) – у цій статті розповідається про те, як програмувати безпосередньо з **потоку грантів коду (pkce)** у вашій програмі, використовуючи будь-яку мову.</span><span class="sxs-lookup"><span data-stu-id="ab190-105">[Microsoft identity platform and OAuth 2.0 authorization code flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) - This article describes how to program directly against the **code grant (PKCE) flow** in your application, using any language.</span></span>
- <span data-ttu-id="ab190-106">У цій статті описано, як безпосередньо з **потоком клієнтів** у вашій програмі описується програма [ідентифікації клієнта Microsoft і обліковий потік облікових даних клієнтів OAuth 2,0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) .</span><span class="sxs-lookup"><span data-stu-id="ab190-106">[Microsoft identity platform and the OAuth 2.0 client credentials flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) - This article describes how to program directly against the **client credentials flow** in your application.</span></span>
- <span data-ttu-id="ab190-107">[Облікові дані власника ресурсу служби ідентифікації Microsoft і OAuth 2,0](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) – у цій статті описано, як програмувати безпосередньо на **потік ropc** у вашій програмі.</span><span class="sxs-lookup"><span data-stu-id="ab190-107">[Microsoft identity platform and OAuth 2.0 Resource Owner Password Credentials](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth-ropc) - This article describes how to program directly against the **ROPC flow** in your application.</span></span>
    - <span data-ttu-id="ab190-108">Платформа ідентифікації Microsoft підтримує лише ROPC для користувачів Azure AD, а не для особистих облікових записів.</span><span class="sxs-lookup"><span data-stu-id="ab190-108">The Microsoft identity platform only supports ROPC for Azure AD tenants, and not for personal accounts.</span></span> <span data-ttu-id="ab190-109">Це означає, що ви повинні використовувати кінцеву точку клієнта **( https://login.microsoftonline.com/{TenantId_or_Name})** або кінцеву точку **організації** ).</span><span class="sxs-lookup"><span data-stu-id="ab190-109">This means that you must use a tenant-specific endpoint **(https://login.microsoftonline.com/{TenantId_or_Name})** or the **organizations** endpoint.</span></span>
    - <span data-ttu-id="ab190-110">Особисті облікові записи, які запрошують на Azure-клієнт AD, не можуть використовувати ROPC.</span><span class="sxs-lookup"><span data-stu-id="ab190-110">Personal accounts that are invited to an Azure AD tenant can't use ROPC.</span></span>
    - <span data-ttu-id="ab190-111">Облікові записи, які не мають паролів, не можуть входити через ROPC.</span><span class="sxs-lookup"><span data-stu-id="ab190-111">Accounts that don't have passwords can't sign in through ROPC.</span></span> <span data-ttu-id="ab190-112">Щоб скористатися цим сценарієм, радимо використовувати інший потік для програми.</span><span class="sxs-lookup"><span data-stu-id="ab190-112">For this scenario, we recommend that you use a different flow for your app, instead.</span></span>
    - <span data-ttu-id="ab190-113">Якщо користувачам потрібно використовувати [багатофакторну автентифікацію (МЗС)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) для входу в програму, їх буде заблоковано.</span><span class="sxs-lookup"><span data-stu-id="ab190-113">If users need to use [multi-factor authentication (MFA)](https://docs.microsoft.com/azure/active-directory/authentication/concept-mfa-howitworks) to log in to the application, they will be blocked.</span></span>
    - <span data-ttu-id="ab190-114">Функція ROPC не підтримується в сценаріях [гібридної Федерації ідентифікації](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) (наприклад, AZURE AD і adfs, які використовуються для автентифікації локальних облікових записів).</span><span class="sxs-lookup"><span data-stu-id="ab190-114">ROPC is not supported in [hybrid identity federation](https://docs.microsoft.com/azure/active-directory/hybrid/whatis-fed) scenarios (for example, Azure AD and ADFS used to authenticate on-premises accounts).</span></span> <span data-ttu-id="ab190-115">Якщо користувачі повністю перенаправляються на локальну постачальника посвідчень, то Azure AD не може перевірити ім'я користувача та пароль для цього постачальника посвідчень.</span><span class="sxs-lookup"><span data-stu-id="ab190-115">If users are full-page redirected to an on-premises identity provider, Azure AD is not able to test the username and password against that identity provider.</span></span> <span data-ttu-id="ab190-116">Однак, підтримка [автентифікації](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) за допомогою програми ropc.</span><span class="sxs-lookup"><span data-stu-id="ab190-116">[Pass-through authentication](https://docs.microsoft.com/azure/active-directory/hybrid/how-to-connect-pta) is supported with ROPC, however.</span></span>
    - <span data-ttu-id="ab190-117">Виняток для гібридного сценарію Федерації ідентифікації має бути таке: політика пошуку вдома за допомогою **AllowCloudPasswordValidation** , яка має значення **True** , дасть змогу виконати потік для роботи з федеративними користувачами, коли локальний пароль синхронізується з хмарою.</span><span class="sxs-lookup"><span data-stu-id="ab190-117">An exception to a hybrid identity federation scenario would be the following: Home Realm Discovery policy with **AllowCloudPasswordValidation** set to **TRUE** will enable ROPC flow to work for federated users when on-premises password is synced to cloud.</span></span> <span data-ttu-id="ab190-118">Додаткові відомості можна знайти в статті [Увімкнення автентифікації на прямих ПК для використання в попередніх версіях програми для роботи з користувачами](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span><span class="sxs-lookup"><span data-stu-id="ab190-118">For more information, see [Enable direct ROPC authentication of federated users for legacy applications](https://docs.microsoft.com/azure/active-directory/manage-apps/configure-authentication-for-federated-users-portal#enable-direct-ropc-authentication-of-federated-users-for-legacy-applications)</span></span> 
- <span data-ttu-id="ab190-119">[Платформа ідентифікації Microsoft і OAuth 2,0 від імені-потоку](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) – у цій статті розповідається про те, як програмувати безпосередньо від імені в програмі **(OBO) потоку** .</span><span class="sxs-lookup"><span data-stu-id="ab190-119">[Microsoft identity platform and OAuth 2.0 On-Behalf-Of flow](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-on-behalf-of-flow) - This article describes how to program directly against the **on-behalf-of (OBO) flow** in your application.</span></span>
- <span data-ttu-id="ab190-120">[Платформа ідентифікації Microsoft і протокол HTTPS Connect](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) – у цій статті описано, як реалізувати протокол HTTPS для підключення незалежно від мови, а також Дізнайтеся, як надсилати та отримувати повідомлення http без використання бібліотек із відкритим вихідним кодом Microsoft.</span><span class="sxs-lookup"><span data-stu-id="ab190-120">[Microsoft identity platform and OpenID Connect protocol](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc) - This article shows how to implement the OpenID Connect protocol independent of language, and describes how to send and receive HTTP messages without using any Microsoft open-source libraries.</span></span>

<span data-ttu-id="ab190-121">**Маркери доступу**</span><span class="sxs-lookup"><span data-stu-id="ab190-121">**Access Tokens**</span></span>

<span data-ttu-id="ab190-122">[Маркери доступу до платформи Microsoft Identity](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) : Дізнайтеся, як ваш API може перевіряти та використовувати скарги в маркер доступу.</span><span class="sxs-lookup"><span data-stu-id="ab190-122">[Microsoft identity platform access tokens](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) - Learn how your API can validate and use the claims inside an access token.</span></span> <span data-ttu-id="ab190-123">Усі документи в цій статті, за винятком випадків, коли вказано, застосовуються лише до маркерів, виданих для API, які ви зареєстрували.</span><span class="sxs-lookup"><span data-stu-id="ab190-123">All documentation in this article, except where noted, applies only to tokens issued for APIs you've registered.</span></span> <span data-ttu-id="ab190-124">Він не застосовується до маркерів, виданих для API, які належать до корпорації Майкрософт, і не можуть використовувати маркери, щоб перевірити, як платформа ідентифікації корпорації Майкрософт видає маркери для створеного API.</span><span class="sxs-lookup"><span data-stu-id="ab190-124">It does not apply to tokens issued for Microsoft-owned APIs, nor can those tokens be used to validate how the Microsoft identity platform will issue tokens for an API you create.</span></span>

<span data-ttu-id="ab190-125">**Конфігурація застосунку**</span><span class="sxs-lookup"><span data-stu-id="ab190-125">**Application Configuration**</span></span>

<span data-ttu-id="ab190-126">[ПЕРЕСПРЯМУВАННЯ URI (відповідь URL-адреси)](https://docs.microsoft.com/azure/active-directory/develop/reply-url) – Дізнайтеся, як настроїти URI переадресації (відповідь URL-адреси).</span><span class="sxs-lookup"><span data-stu-id="ab190-126">[Redirect URI (reply URL) restrictions and limitations](https://docs.microsoft.com/azure/active-directory/develop/reply-url) - Learn how to configure your Redirect URI (reply URL).</span></span> <span data-ttu-id="ab190-127">Редирект або відповідь URL-адреса – це розташування, у якому сервер авторизації надсилає користувачу, коли програма успішно авторизована, і надав код авторизації або маркер доступу.</span><span class="sxs-lookup"><span data-stu-id="ab190-127">A redirect URI, or reply URL, is the location where the authorization server sends the user once the app has been successfully authorized and granted an authorization code or access token.</span></span> <span data-ttu-id="ab190-128">Сервер авторизації надсилає код або маркер до URI переспрямування; тому важливо зареєструвати правильне розташування як частину процесу реєстрації програми.</span><span class="sxs-lookup"><span data-stu-id="ab190-128">The authorization server sends the code or token to the redirect URI; so it's important you register the correct location as part of the app registration process.</span></span>

<span data-ttu-id="ab190-129">**Підготовка програм**</span><span class="sxs-lookup"><span data-stu-id="ab190-129">**Application Provisioning**</span></span>

<span data-ttu-id="ab190-130">[Навчальний посібник: розробка та планування підготовки до кінцевої точки SCIM](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) – у цій статті описано, як створити кінцеву точку SCIM та інтегрувати її за допомогою служби підготовки aad.</span><span class="sxs-lookup"><span data-stu-id="ab190-130">[Tutorial: Develop and plan provisioning for a SCIM endpoint](https://docs.microsoft.com/azure/active-directory/app-provisioning/use-scim-to-provision-users-and-groups) - This article describes how to build an SCIM endpoint and integrate with the AAD provisioning service.</span></span>


